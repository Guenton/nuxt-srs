exports.ids=[4],exports.modules={29:function(t,e,r){"use strict";var o={},l=r(1),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-navbar",{attrs:{type:"dark",variant:"dark"}},[r("b-navbar-brand",{attrs:{to:"/home"}},[t._v("SIBOX")]),t._v(" "),r("b-navbar-nav",[r("b-nav-item",{attrs:{to:"/log"}},[t._v("Logs")]),t._v(" "),r("b-nav-item-dropdown",{attrs:{text:"Statistics",right:""}},[r("b-dropdown-item",{attrs:{to:"/stat/"}},[t._v("Summary")]),t._v(" "),r("b-dropdown-item",{attrs:{to:"/stat/org"}},[t._v("Organization Chart")])],1),t._v(" "),r("b-nav-item-dropdown",{attrs:{text:"Overview",right:""}},[r("b-dropdown-item",{attrs:{to:"/emp/"}},[t._v("Employees")]),t._v(" "),r("b-dropdown-item",{attrs:{to:"/pos/"}},[t._v("Positions")]),t._v(" "),r("b-dropdown-item",{attrs:{to:"/sub/"}},[t._v("Subsidiaries")]),t._v(" "),r("b-dropdown-item",{attrs:{to:"/service/"}},[t._v("Services")])],1)],1)],1)],1)}),[],!1,null,null,"3686c68e");e.a=component.exports},30:function(t,e){t.exports="http://localhost:3000/api"},31:function(t,e,r){"use strict";var o={props:{text:{type:String,default:"",required:!1},variant:{type:String,default:"info",required:!1},show:{type:Boolean,required:!0,default:!1}}},l=r(1),component=Object(l.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("b-row",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"mt-4"},[e("b-col",[e("b-alert",{attrs:{show:this.show,variant:this.variant,dismissible:"",fade:""}},[this._v("\n      "+this._s(this.text)+"\n    ")])],1)],1)}),[],!1,null,null,"3a5b6af9");e.a=component.exports},32:function(t,e,r){"use strict";var o={props:{h3text:{type:String,required:!0},buttonText:{type:String,required:!0},linkTo:{type:String,required:!0},buttonVariant:{type:String,default:"secondary",required:!1}}},l=r(1),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-row",{staticClass:"mt-4"},[r("b-col",{staticClass:"text-left"},[r("h3",[t._v(t._s(t.h3text))])]),t._v(" "),r("b-col",{staticClass:"text-right mb-2"},[r("b-button",{attrs:{variant:t.buttonVariant,to:t.linkTo}},[t._v("\n      "+t._s(t.buttonText)+"\n    ")])],1)],1)}),[],!1,null,null,"fe758866");e.a=component.exports},77:function(t,e,r){"use strict";r.r(e);var o=r(30),l=r.n(o),n=r(29),m=r(32),d=r(31),c={components:{NavbarHome:n.a,H3withButton:m.a,AlertBox:d.a},data(){return{id:this.$route.params.id,form:{firstname:"",middlename:"",lastname:"",addr:"",hood:"",email:"",dob:null,passport:"",ident:"",posmain_id:null,scopesub_id:null},validation:{firstname:!0,lastname:!0,email:null,dob:null,passport:null,pos:!0,sub:!0},response:{success:"",error:""},search:{name:[]},dropdown:{pos:[{value:null,text:"Please select Position"}],sub:[{value:null,text:"Please select Subsidiary"}]}}},computed:{hasSuc(){return this.response.success.length>0},hasErr(){return this.response.error.length>0},searchNameHasResult(){return this.search.name.length>0},incompleteValidation(){return null===this.validation.firstname||null===this.validation.lastname||null===this.validation.pos||null===this.validation.sub||!1===this.validation.firstname||!1===this.validation.lastname||!1===this.validation.email||!1===this.validation.dob||!1===this.validation.passport||!1===this.validation.pos||!1===this.validation.sub}},mounted(){this.getPosDropdown(),this.getSubDropdown(),this.getEmpData()},methods:{size2Validator(t){this.response.success="",this.response.error="",this.search.name=[],"firstname"===t&&(this.form.firstname.length>=2?(this.validation.firstname=!0,this.searchName("firstname")):this.validation.firstname=!1),"lastname"===t&&(this.form.lastname.length>=2?(this.validation.lastname=!0,this.searchName("lastname")):this.validation.lastname=!1)},emailValidator(){/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.form.email).toLowerCase())?this.validation.email=!0:this.form.email?this.validation.email=!1:this.validation.email=null},passportValidator(){this.form.passport?9===this.form.passport.length?this.validation.passport=!0:this.validation.passport=!1:this.validation.passport=null},invalidFirstname(){if(this.form.firstname.length>0){return`Enter at least ${2-this.form.firstname.length} more characters`}return"Please enter something"},invalidLastname(){if(this.form.lastname.length>0){return`Enter at least ${2-this.form.lastname.length} more characters`}return"Please enter something"},invalidAddress(){if(this.form.addr.length>0){return`Enter at least ${2-this.form.addr.length} more characters`}return"Please enter something"},dateValidator(){this.form.dob?this.validation.dob=!0:this.validation.dob=null},workValidator(){!this.form.posmain_id&&this.form.scopesub_id?(this.validation.pos=!1,this.validation.sub=!0):this.form.posmain_id&&!this.form.scopesub_id?(this.validation.pos=!0,this.validation.sub=!1):this.form.posmain_id||this.form.scopesub_id?(this.validation.pos=!0,this.validation.sub=!0):(this.validation.pos=!1,this.validation.sub=!1)},async dropdownRequest(t){try{const e=await this.$axios.$get(t);return e.err?(this.response.error=e.err,[]):e.data}catch(t){return this.response.error=t,[]}},async getPosDropdown(){const t=`${l.a}/pos/md`;(await this.dropdownRequest(t)).forEach(t=>{this.dropdown.pos.push({value:t.posmain_id,text:t.title})})},async getSubDropdown(){const t=`${l.a}/scope-sub/sm`;(await this.dropdownRequest(t)).forEach(t=>{this.dropdown.sub.push({value:t.scopesub_id,text:t.shorthand})})},async getEmpData(){const t=`${l.a}/emp/md?id=${this.id}`;try{const e=await this.$axios.$get(t);e.err?this.response.error=e.err:this.form=e.data[0];const r=new Date(this.form.dob).toISOString().substr(0,10);this.form.dob=r}catch(t){this.response.error=t}},async searchName(t){const e="firstname"===t?this.form.firstname:this.form.lastname,r=`${l.a}/search/emp`;try{const t=await this.$axios.$get(r,{params:{query:e}});t.err?this.response.error=t.err:this.search.name=t.data}catch(t){this.response.error=t}},async onSubmit(t){t.preventDefault();const e=`${l.a}/emp/${this.id}`;try{const t=await this.$axios.$put(e,this.form);t.err?this.response.error=t.err:(this.onReset(),this.response.success=t.suc)}catch(t){this.response.error=t}},onReset(t){t&&t.preventDefault(),this.validation={firstname:!0,lastname:!0,email:null,dob:null,passport:null,pos:!0,sub:!0},this.response={success:"",error:""},this.search.name=[],this.getEmpData()}}},h=r(1),component=Object(h.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("NavbarHome"),t._ssrNode(" "),r("b-container",[r("H3withButton",{attrs:{h3text:"Edit Employee","button-text":"Cancel and Return","link-to":"/emp"}}),t._v(" "),r("b-form",{attrs:{novalidate:""},on:{submit:t.onSubmit,reset:t.onReset}},[r("b-card",{attrs:{"bg-variant":"light"}},[r("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-lg":"3",label:"Name","label-size":"lg","label-class":"font-weight-bold pt-0"}},[r("b-form-group",{staticClass:"mb-2",attrs:{state:t.validation.firstname,"invalid-feedback":t.invalidFirstname(),label:"First Name:","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{state:t.validation.firstname},on:{focus:function(e){return t.size2Validator("firstname")},keydown:function(e){return t.size2Validator("firstname")}},model:{value:t.form.firstname,callback:function(e){t.$set(t.form,"firstname",e)},expression:"form.firstname"}})],1),t._v(" "),r("b-form-group",{staticClass:"mb-2",attrs:{label:"Middle Name:","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{model:{value:t.form.middlename,callback:function(e){t.$set(t.form,"middlename",e)},expression:"form.middlename"}})],1),t._v(" "),r("b-form-group",{staticClass:"mb-2",attrs:{state:t.validation.lastname,"invalid-feedback":t.invalidLastname(),label:"Last Name:","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{state:t.validation.lastname},on:{focus:function(e){return t.size2Validator("lastname")},keydown:function(e){return t.size2Validator("lastname")}},model:{value:t.form.lastname,callback:function(e){t.$set(t.form,"lastname",e)},expression:"form.lastname"}})],1)],1)],1),t._v(" "),r("b-collapse",{attrs:{id:"nameSearchResult",visible:t.searchNameHasResult}},[r("b-alert",{staticClass:"mt-1",attrs:{show:"",variant:"info"}},[r("p",[t._v("Found the Following Employees with similar names")]),t._v(" "),r("ul",t._l(t.search.name,(function(e){return r("li",{key:e.empmain_id},[r("strong",[t._v("Employee #"+t._s(e.empmain_id)+":")]),t._v("\n              "+t._s(e.firstname)+" "+t._s(e.lastname)+"\n              "),r("em",[t._v(" - "+t._s(e.position)+" at "+t._s(e.subsidiary))])])})),0)])],1),t._v(" "),r("b-card",{staticClass:"mt-4",attrs:{"bg-variant":"light"}},[r("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-lg":"3",label:"Address","label-size":"lg","label-class":"font-weight-bold pt-0"}},[r("b-form-group",{staticClass:"mb-2",attrs:{label:"Address:","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{model:{value:t.form.addr,callback:function(e){t.$set(t.form,"addr",e)},expression:"form.addr"}})],1),t._v(" "),r("b-form-group",{staticClass:"mb-2",attrs:{label:"Neighborhood:","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{model:{value:t.form.hood,callback:function(e){t.$set(t.form,"hood",e)},expression:"form.hood"}})],1),t._v(" "),r("b-form-group",{staticClass:"mb-2",attrs:{state:t.validation.email,label:"Email:","label-cols-sm":"3","label-align-sm":"right","invalid-feedback":"Please enter a valid Email Address"}},[r("b-form-input",{attrs:{state:t.validation.email},on:{focus:t.emailValidator,keydown:t.emailValidator},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)],1),t._v(" "),r("b-card",{staticClass:"mt-4",attrs:{"bg-variant":"light"}},[r("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-lg":"3",label:"Identification","label-size":"lg","label-class":"font-weight-bold pt-0"}},[r("b-form-group",{staticClass:"mb-2",attrs:{state:t.validation.dob,label:"Date of Birth:","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{attrs:{state:t.validation.dob,type:"date"},on:{change:t.dateValidator},model:{value:t.form.dob,callback:function(e){t.$set(t.form,"dob",e)},expression:"form.dob"}})],1),t._v(" "),r("b-form-group",{staticClass:"mb-2",attrs:{state:t.validation.passport,label:"Passport:","label-cols-sm":"3","label-align-sm":"right","invalid-feedback":"System only accepts 9-character passports"}},[r("b-form-input",{attrs:{state:t.validation.passport},on:{change:t.passportValidator,focus:t.passportValidator},model:{value:t.form.passport,callback:function(e){t.$set(t.form,"passport",e)},expression:"form.passport"}})],1),t._v(" "),r("b-form-group",{staticClass:"mb-2",attrs:{label:"ID:","label-cols-sm":"3","label-align-sm":"right"}},[r("b-form-input",{model:{value:t.form.ident,callback:function(e){t.$set(t.form,"ident",e)},expression:"form.ident"}})],1)],1)],1),t._v(" "),r("b-card",{staticClass:"mt-4",attrs:{"bg-variant":"light"}},[r("b-form-group",{staticClass:"mb-0",attrs:{"label-cols-lg":"3",label:"Work","label-size":"lg","label-class":"font-weight-bold pt-0"}},[r("b-form-group",{staticClass:"mb-2",attrs:{"label-cols-sm":"3",label:"Position:","label-align-sm":"right"}},[r("b-form-select",{attrs:{options:t.dropdown.pos,state:t.validation.pos},on:{change:t.workValidator},model:{value:t.form.posmain_id,callback:function(e){t.$set(t.form,"posmain_id",e)},expression:"form.posmain_id"}})],1),t._v(" "),r("b-form-group",{staticClass:"mb-2",attrs:{"label-cols-sm":"3",label:"Subsidiary:","label-align-sm":"right"}},[r("b-form-select",{attrs:{options:t.dropdown.sub,state:t.validation.sub},on:{change:t.workValidator},model:{value:t.form.scopesub_id,callback:function(e){t.$set(t.form,"scopesub_id",e)},expression:"form.scopesub_id"}})],1)],1)],1),t._v(" "),r("AlertBox",{attrs:{show:t.hasSuc,text:t.response.success,variant:"success"}}),t._v(" "),r("AlertBox",{attrs:{show:t.hasErr,text:t.response.error,variant:"danger"}}),t._v(" "),r("b-form-row",{staticClass:"my-3"},[r("b-col",{staticClass:"text-right"},[r("b-button",{staticClass:"px-4",attrs:{disabled:t.incompleteValidation,type:"submit",variant:"success"}},[t._v("\n            Update Employee\n          ")])],1),t._v(" "),r("b-col",{staticClass:"text-left"},[r("b-button",{staticClass:"px-4",attrs:{type:"reset",variant:"secondary"}},[t._v("\n            Reset Form\n          ")])],1)],1)],1)],1)],2)}),[],!1,null,null,"2262a880");e.default=component.exports}};